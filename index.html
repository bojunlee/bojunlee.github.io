<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第一名的網站</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* 添加额外的CSS样式以调整数值显示 */
        #data-table {
            margin: 0 auto;
        }
        #data-table th, #data-table td {
            font-size: 20px;
            padding: 10px 20px;
            text-align: center;
        }
        .data-row {
            display: flex;
            justify-content: space-between;
        }
        .data-row th, .data-row td {
            width: 48%; /* 将温度和湿度分开，各占48%的宽度 */
        }
    </style>
</head>
<body>
    <header>
        <h1>寵物機器人-環太平洋號</h1>
    </header>
    <main>
        <section id="thingspeak-section">
            <h2>ThingSpeak Data</h2>
            <div id="thingspeak-data">
                <!-- ThingSpeak data will be displayed here -->
            </div>
        </section>
        <section id="time-section">
            <h2>Current Time</h2>
            <p>当前时间：<span id="current-time"></span></p>
        </section>
    </main>
    <footer>
        <p>&copy; 2023 開發中</p>
    </footer>

    <script>
        // Define your ThingSpeak channel ID
        const channelID = '2277697';

        function fetchData() {
            // Get the ThingSpeak data URL
            const url = `https://api.thingspeak.com/channels/${channelID}/feeds.json?results=1`;

            // Fetch data from ThingSpeak
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    // Parse JSON data and display it on the web page
                    const thingspeakData = document.getElementById('thingspeak-data');
                    const feed = data.feeds[0];
                    if (feed) {
                        const table = document.createElement('table');
                        table.id = 'data-table'; // 添加表格的ID以应用CSS样式
                        table.innerHTML = `
                            <tr class="data-row">
                                <th>溫度</th>
                                <th>濕度</th>
                            </tr>
                            <tr class="data-row">
                                <td>${feed.field1}(°C)</td>
                                <td>${feed.field2}(%)</td>
                            </tr>
                        `;
                        thingspeakData.innerHTML = '';
                        thingspeakData.appendChild(table);
                    }
                })
                .catch(error => {
                    console.error('An error occurred:', error);
                });
        }

        // Function to update current time
        function updateCurrentTime() {
            const currentTimeElement = document.getElementById('current-time');
            const now = new Date();
            const formattedTime = now.toLocaleString(); // Get current time as a string
            currentTimeElement.textContent = formattedTime; // Update the content of the <span> element
        }

        // Fetch data initially
        fetchData();

        // Set up an interval to fetch data every 5 seconds
        setInterval(fetchData, 5000);

        // Set up an interval to update current time every second
        setInterval(updateCurrentTime, 1000);
    </script>
</body>
</html>
